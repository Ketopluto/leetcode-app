<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>LeetCode Statistics Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background-color: #f5f5f5; }
    .container { max-width: 1200px; margin: 0 auto; padding: 20px; background-color: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    h1 { text-align: center; color: #333; }
    .leaderboard { margin-bottom: 30px; }
    .leaderboard h2 { border-bottom: 2px solid #4caf50; padding-bottom: 10px; color: #4caf50; }
    .leaderboard ul { list-style: none; padding: 0; }
    .leaderboard li { background: #e8f5e9; margin: 10px 0; padding: 10px; border-radius: 4px; display: flex; justify-content: space-between; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    table th, table td { border: 1px solid #ddd; padding: 10px; text-align: center; }
    table th { background-color: #4caf50; color: white; }
    tr:hover { background-color: #f1f1f1; }
    /* Style for higher studies rows */
    .higher-studies { background-color: #fff3cd !important; }
    .download-btn { display: inline-block; margin-top: 20px; padding: 10px 20px; background-color: #4caf50; color: #fff; text-decoration: none; border-radius: 4px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>LeetCode Statistics Dashboard</h1>
    
    <!-- Leaderboard Section -->
    <div class="leaderboard">
      <h2>Top 7 Problem Solvers</h2>
      <ul>
        {% for solver in top_7_data %}
          <li>
            <span>{{ solver.actual_name }} ({{ solver.username }})</span>
            <span>Problems Solved: {{ solver.total }}</span>
          </li>
        {% endfor %}
      </ul>
    </div>
    
    <!-- Table of All Students -->
    <table>
      <thead>
        <tr>
          <th>Roll Number</th>
          <th>Name</th>
          <th>LeetCode Username</th>
          <th>Easy Solved</th>
          <th>Medium Solved</th>
          <th>Hard Solved</th>
          <th>Total Solved</th>
        </tr>
      </thead>
      <tbody>
        {% for row in results %}
          <tr {% if row.username == 'higher studies' %}class="higher-studies"{% endif %}>
            <td>{{ row.roll_no }}</td>
            <td>{{ row.actual_name }}</td>
            <td>{{ row.username }}</td>
            <td>{{ row.easy }}</td>
            <td>{{ row.medium }}</td>
            <td>{{ row.hard }}</td>
            <td>{{ row.total }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    
    <a class="download-btn" href="/download">Download CSV</a>
  </div>
</body>
</html>