<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LeetCode Statistics Dashboard</title>
  <link rel="stylesheet" href="static/css/critical.css">
  <link rel="preload" href="static/css/non-critical.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="static/css/non-critical.css"></noscript>
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="navbar">
    <a href="/" class="navbar-brand">
      <span>📊</span>
      <span>LeetCode Stats</span>
    </a>
    <div class="navbar-links">
      <a href="/" class="navbar-link">
        <span>🏠</span>
        <span>Dashboard</span>
      </a>
      <a href="/admin/login" class="navbar-link admin">
        <span>🔐</span>
        <span>Admin</span>
      </a>
    </div>
  </nav>

  <!-- Loading Screen -->
  <div id="loading-screen">
    <div class="loader-container">
      <div id="spinner-container"></div>
      <p class="loading-text" id="loading-text">Fetching LeetCode Stats</p>
      <p class="loading-subtext" id="loading-subtext">Hang tight! This won't take long...</p>
      <div class="progress-bar-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
      <p class="fun-fact" id="fun-fact"></p>
    </div>
  </div>

  <!-- Main Content -->
  <div class="container" id="mainContent">
    <div class="header-section">
      <h1 class="main-title">
        <span class="emoji">📊</span> LeetCode Statistics Dashboard <span class="emoji">🚀</span>
      </h1>
      <p class="subtitle">Track your coding progress and compete with peers</p>
    </div>

    <!-- Year Selection -->
    <div class="year-select">
      <form id="yearForm" class="filter-form">
        <label for="year" class="filter-label">
          <span class="filter-icon">🎓</span> Filter by Year:
        </label>
        <div class="select-wrapper">
          <select name="year" id="year" class="year-dropdown">
            <option value="">All Years</option>
            {% for year in available_years %}
            <option value="{{ year }}">{{ year }}</option>
            {% endfor %}
          </select>
        </div>
        <button type="submit" class="apply-btn">Apply Filter</button>
      </form>
    </div>

    <!-- Leaderboard Section -->
    <div class="leaderboard" id="leaderboard">
      <div class="section-header">
        <h2 class="section-title">
          <span class="trophy">🏆</span> Top 5 Problem Solvers
        </h2>
      </div>
      <ul id="leaderboardList" class="leaderboard-list">
        <!-- Leaderboard data will be inserted here -->
      </ul>
    </div>

    <!-- Stats Overview Cards -->
    <div class="stats-overview" id="statsOverview">
      <div class="stat-card">
        <div class="stat-icon">👥</div>
        <div class="stat-value" id="totalUsers">0</div>
        <div class="stat-label">Total Users</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">✅</div>
        <div class="stat-value" id="totalProblems">0</div>
        <div class="stat-label">Problems Solved</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">📈</div>
        <div class="stat-value" id="avgProblems">0</div>
        <div class="stat-label">Average per User</div>
      </div>
    </div>

    <!-- Table Container -->
    <div class="table-section">
      <div class="section-header">
        <h2 class="section-title">
          <span class="table-icon">📋</span> Detailed Statistics
        </h2>
      </div>
      <div class="table-wrapper" id="tableContainer">
        <!-- Table will be injected here -->
      </div>
    </div>

    <!-- Download Button -->
    <div class="download-section">
      <a class="download-btn" id="downloadLink" href="#">
        <span class="download-icon">⬇️</span> Download CSV Report
      </a>
    </div>
  </div>

  <script src="static/js/main.js"></script>
</body>
</html>
